#!/usr/bin/env ruby

# frozen_string_literal: true

def set_given_or_default_command
  ARGV.concat %w[puma] if ARGV.empty?
end

def execute_given_or_default_command
  exec(*ARGV)
end

def run_database_migrations
  raise('Migrations failed') unless system('rails db:migrate')
end

def run_database_seeds
  raise('Seeds failed') unless system('rails db:seed')
end

set_given_or_default_command
run_database_migrations
run_database_seeds
execute_given_or_default_command
